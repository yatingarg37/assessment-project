<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>LIVE STATUS</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/trainstn.css">
</head>
<body style="background-image: linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,0.5)),url('train1.jpg');">
    <section >
            <h1 style="text-align:center;color: #fff";>TRAIN BETWEEN STATIONS</h1>
            <div class="div1">
            <input type="text" placeholder="SOURCE STN CODE" id="srcstn" style="text-align: center;padding: 10px;"/>
            <input type="text" placeholder="DESTINATION STN CODE" id="dststn" style="text-align: center;padding: 10px;"/>
            <input type="text" placeholder="Date(dd-mm-yyyy)" id="dte" style="text-align: center;padding: 10px;"/>
        </div>
        <input type="button" value="SUBMIT" onclick="function1()" class="btn"/>
        </section>
        <div id="ans"> 
            <p ></p>
        </div>
        <script> 
                function function1()
                {
                var srcstn=document.getElementById("srcstn").value
                var dststn=document.getElementById("dststn").value
                var dte=document.getElementById("dte").value
                var ans=document.getElementById("ans")
                var url = "https://api.railwayapi.com/v2/between/source/"+srcstn+"/dest/"+dststn+"/date/"+dte+"/apikey/5ddjxfe3kk/"
                        var xhr = new XMLHttpRequest()
                        xhr.open('GET',url)
                        xhr.onreadystatechange = test
                        function test() {
                            if(this.status==200 && this .readyState==4) {
                            var res_data = JSON.parse(this.responseText)
                            console.log(typeof res_data)
                            console.log(res_data)
                            for(var i=0;i<15;i++){
                            var x=res_data.trains[i].name;
                            var x1=document.createElement("P")
                            x1.innerHTML=x;
                            ans.appendChild(x1)


                        }}      
                        }                    
                        xhr.send()
                        }
    </script>
</body>
</html>
