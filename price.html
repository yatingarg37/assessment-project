<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Price</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/price.css">
</head>
<body style="background-image: linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,0.5)),url('IAG.jpg');">
    <section >
            <h1 style="text-align:center;color: #fff";>Price of Tickets</h1>
            <div class="div1" style="left:38%;">
            <input type="text" placeholder="Orgin Code" id="orgcd" style="text-align: center;padding: 10px;"/>
            <input type="text" placeholder="Destination Code" id="dstcd" style="text-align: center;padding: 10px;"/>
        </div>
        <input type="button" value="SUBMIT" onclick="function1()" class="btn" style="left: 42%;"/>
        <div id="ans"> 
                <p ></p>
            </div>
        </section>
        <script>
            function function1(){
                var orgcd = document.getElementById("orgcd").value
                var dstcd = document.getElementById("dstcd").value
                var url = "https://travelpayouts-travelpayouts-flight-data-v1.p.rapidapi.com/v2/prices/latest?trip_class=0&limit=30&show_to_affiliates=true&sorting=price&currency=INR&page=1&period_type=year&origin="+orgcd+"&destination="+dstcd+""
        var xhr = new XMLHttpRequest()
        xhr.open('GET',url)
        xhr.onreadystatechange = test
        function test() {
            if(this.status==200 && this .readyState==4) {
            var res_data = JSON.parse(this.responseText)
            console.log(res_data)
            for(var i=0;i<15;i++){
                var x2= res_data.data[i].gate;
                           var x =res_data.data[i].value;
                           console.log(x);
                            var x1=document.createElement("P")
                            x1.innerHTML="Gate: "+x2+"   PRICE: "+x;
                            ans.appendChild(x1)
            console.log(x)
            } }}

xhr.open("GET", "https://travelpayouts-travelpayouts-flight-data-v1.p.rapidapi.com/v2/prices/latest?trip_class=0&limit=30&show_to_affiliates=true&sorting=price&currency=INR&page=1&period_type=year&origin="+orgcd+"&destination="+dstcd+"");
xhr.setRequestHeader("x-rapidapi-host", "travelpayouts-travelpayouts-flight-data-v1.p.rapidapi.com");
xhr.setRequestHeader("x-rapidapi-key", "f45438510emsh657b8da083cb49dp14cfbbjsnf869defa4df8");
xhr.setRequestHeader("x-access-token", "4c67bbe39a1e1ea3b8e02452ab7c00f7");

xhr.send();}
        </script>
    
</body>
</html>
